name: ZE CSGO Server

on:
  push:
    branches:
    - main
  workflow_dispatch:

jobs:
  upload:
    name: ðŸš€ Deploy ZE CSGO
    runs-on: ubuntu-20.04
    if: github.ref == 'refs/heads/main'
    steps:
      - name: ðŸšš Get latest code
        uses: actions/checkout@v2

      - name: ðŸ“‚ Sync Leader whitelist
        uses: SamKirkland/FTP-Deploy-Action@4.0.0
        with:
          server: ${{ secrets.ftp_main_server }}
          username: ${{ secrets.ftp_main_username }}
          password: ${{ secrets.ftp_main_password }}
          port: ${{ secrets.ftp_main_port }}
          local-dir: othercfg/
          server-dir: addons/sourcemod/configs/othercfg/

      - name: ðŸ“‚ Sync BossHP
        uses: SamKirkland/FTP-Deploy-Action@4.0.0
        with:
          server: ${{ secrets.ftp_main_server }}
          username: ${{ secrets.ftp_main_username }}
          password: ${{ secrets.ftp_main_password }}
          port: ${{ secrets.ftp_main_port }}
          local-dir: bosshp/
          server-dir: addons/sourcemod/configs/othercfg/bosshp/

      - name: ðŸ“‚ Sync MapAdmin
        uses: SamKirkland/FTP-Deploy-Action@4.0.0
        with:
          server: ${{ secrets.ftp_main_server }}
          username: ${{ secrets.ftp_main_username }}
          password: ${{ secrets.ftp_main_password }}
          port: ${{ secrets.ftp_main_port }}
          local-dir: mapadmin/
          server-dir: addons/sourcemod/configs/othercfg/mapadmin/

      - name: ðŸ“‚ Sync SaveLevel
        uses: SamKirkland/FTP-Deploy-Action@4.0.0
        with:
          server: ${{ secrets.ftp_main_server }}
          username: ${{ secrets.ftp_main_username }}
          password: ${{ secrets.ftp_main_password }}
          port: ${{ secrets.ftp_main_port }}
          local-dir: savelevel/
          server-dir: addons/sourcemod/configs/othercfg/savelevel/

      - name: ðŸ“‚ Sync EntWatch
        uses: SamKirkland/FTP-Deploy-Action@4.0.0
        with:
          server: ${{ secrets.ftp_main_server }}
          username: ${{ secrets.ftp_main_username }}
          password: ${{ secrets.ftp_main_password }}
          port: ${{ secrets.ftp_main_port }}
          local-dir: entwatch/
          server-dir: cfg/sourcemod/entwatch/maps/
      
      - name: ðŸ“‚ Sync FwMapsLevel
        uses: SamKirkland/FTP-Deploy-Action@4.0.0
        with:
          server: ${{ secrets.ftp_main_server }}
          username: ${{ secrets.ftp_main_username }}
          password: ${{ secrets.ftp_main_password }}
          port: ${{ secrets.ftp_main_port }}
          local-dir: fwmapslevel/
          server-dir: addons/sourcemod/configs/fwmapslevel/
